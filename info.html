<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASSIGNME - FAQ + Question en bas</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#000;
      --text:#e8f4ff;
      --neon:#5ca0ff;
      --faq:#cfe0ff;
      --faqHover:#dff0ff;
      --faqActive:#6c8cff;
      --panel-h: 340px;   /* mis à jour par JS */
      --panel-gap: 16px;  /* espace entre la vignette et le footer */
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      overflow-x:hidden;
    }

    /* ===== Header ===== */
    header{
      width:100%;
      padding:20px 40px;
      display:flex;justify-content:space-between;align-items:center;
      position:fixed;top:0;left:0;height:80px;
      background:rgba(0,0,0,.95);backdrop-filter:blur(15px);
      border-bottom:2px solid rgba(100,149,237,.3);
      box-shadow:0 4px 20px rgba(100,149,237,.1);
      z-index:1000;
    }
    .logo-header{font-weight:700;display:flex;align-items:center;color:#fff;text-decoration:none;letter-spacing:.5px}
    .logo-header:hover{color:#fff}
    .contact-btn{
      padding:12px 24px;border:none;border-radius:25px;cursor:pointer;font-weight:700;
      background:linear-gradient(45deg,#6495ed,#87ceeb);color:#0f0f23;box-shadow:0 4px 15px rgba(100,149,237,.4);
      text-decoration:none;text-transform:uppercase;letter-spacing:1px;
    }

    /* ===== Hero ===== */
    .hero{
      min-height:100vh;
      padding-top:80px;        /* header */
      position:relative;
      background:#000 url('design.png') no-repeat center center / contain; /* desktop par défaut */
      display:flex;align-items:center;justify-content:center;
    }

    /* ===== Vignette ===== */
    .panel{
      position:absolute; right:220px; top:50%; transform:translateY(-50%);
      width:260px; max-height:calc(100vh - 120px);
      display:flex;flex-direction:column; overflow:hidden; isolation:isolate;
      border-radius:14px; background:#000;
      border:1.5px solid rgba(92,160,255,.9);
      box-shadow:0 0 14px rgba(92,160,255,.75),0 0 36px rgba(92,160,255,.28);
      z-index:10;
    }
    .panel::before{
      content:''; position:absolute; inset:-7px; border-radius:inherit; pointer-events:none;
      border:2px solid rgba(92,160,255,.85); filter:blur(7px);
      animation:neonPulse 3s ease-in-out infinite; z-index:-1;
    }
    @keyframes neonPulse{0%,100%{opacity:.85;filter:blur(6px)}50%{opacity:1;filter:blur(9px)}}

    .scroll{flex:1 1 auto; overflow:auto; padding:10px}
    .answer-box{display:none;margin-bottom:10px;padding:10px;border:1px solid rgba(92,160,255,.35);border-radius:10px;background:rgba(255,255,255,.04);font-size:.8rem;line-height:1.5}

    /* FAQ */
    .faq-list{list-style:none;display:flex;flex-direction:column;gap:8px}
    .faq-item{border-radius:10px;overflow:hidden}
    .faq-btn{
      width:100%;display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:10px 12px;border:none;border-radius:10px;cursor:pointer;
      color:#001;font-weight:800;font-size:.82rem;background:var(--faq);
      box-shadow:0 2px 9px rgba(92,160,255,.22);transition:.18s ease;
      text-align:left;
    }
    .faq-btn:hover{background:var(--faqHover)}
    .faq-btn[aria-expanded="true"]{background:var(--faqActive);color:#001}
    .chev{width:10px;height:10px;border-right:2px solid currentColor;border-bottom:2px solid currentColor;transform:rotate(45deg);transition:.18s ease}
    .faq-btn[aria-expanded="true"] .chev{transform:rotate(-135deg)}
    .answer{max-height:0;overflow:hidden;transition:max-height .22s ease}
    .answer-inner{padding:10px 12px 12px;font-size:.78rem;line-height:1.55;background:rgba(255,255,255,.07);border-radius:10px;margin-top:4px}

    /* Input */
    .input-wrap{margin-top:12px;display:flex;gap:6px;border-top:1px dashed rgba(92,160,255,.35);padding-top:8px}
    .in{flex:1;min-width:0;padding:10px 12px;border-radius:10px;border:1px solid rgba(92,160,255,.5);background:#0b0f17;color:var(--text);font-size:.82rem}
    .send{padding:10px 12px;border:none;border-radius:10px;background:var(--faq);color:#001;font-weight:800;font-size:.8rem;cursor:pointer;box-shadow:0 2px 10px rgba(92,160,255,.25)}

    /* ===== Footer ===== */
    .footer{background:#000;padding:40px 20px;text-align:center;border-top:1px solid rgba(100,149,237,.2)}
    .footer-content{max-width:1200px;margin:0 auto;color:#87ceeb}

    /* ===== Responsive ===== */
    @media (max-width:1200px){
      .panel{right:140px}
    }

    /* ====== MOBILE ====== */
    @media (max-width:900px){
      /* 1) Pas d'image de fond sur mobile */
      .hero{
        background:none;            /* enlève design.png */
        min-height:auto;            /* évite une grande zone vide */
        padding-top:80px;
        /* réserve un espace pour la vignette flottante */
        padding-bottom:calc(var(--panel-h) + var(--panel-gap) + env(safe-area-inset-bottom));
        display:block;
      }

      /* 2) Vignette flottante centrée */
      .panel{
        position:fixed; left:50%; right:auto; top:auto;
        bottom:max(10px, env(safe-area-inset-bottom));
        transform:translateX(-50%);
        width:min(95vw, 420px);
        max-height:60vh;
        z-index:999;
      }
    }

    @media (max-width:768px){
      header{padding:15px 20px;height:70px}
      .hero{padding-top:70px}
      .panel{width:min(95vw, 380px);max-height:55vh}
      .answer-inner{font-size:.74rem}
    }

    @media (max-width:480px){
      .panel{width:calc(100vw - 20px);max-height:52vh}
      .answer-inner{font-size:.72rem}
    }

    @media (max-height:600px){
      .panel{max-height:45vh}
    }
  </style>
</head>
<body>
  <header>
    <a class="logo-header" href="index.html">
      <img alt="Assignme Logo" src="logo.png" style="height:50px;width:auto;margin-right:10px;">
      ASSIGNME
    </a>
    <a class="contact-btn" href="mailto:contact@assignme.fr">Nous contacter</a>
  </header>

  <main class="hero" role="main" aria-label="Hero">
    <aside class="panel" aria-label="FAQ et question libre">
      <div class="scroll">
        <div id="qa-answer" class="answer-box"></div>

        <ul class="faq-list" role="list">
          <li class="faq-item">
            <button id="q1" class="faq-btn" aria-expanded="false" aria-controls="a1">
              <span>Qu'est-ce qu'ASSIGNME ?</span><span class="chev" aria-hidden="true"></span>
            </button>
            <div id="a1" class="answer" role="region" aria-labelledby="q1">
              <div class="answer-inner">ASSIGNME est une plateforme SaaS DeepTech qui automatise le matching candidats → opportunités via IA, en quelques minutes.</div>
            </div>
          </li>

          <li class="faq-item">
            <button id="q2" class="faq-btn" aria-expanded="false" aria-controls="a2">
              <span>Quel problème résolvez-vous ?</span><span class="chev" aria-hidden="true"></span>
            </button>
            <div id="a2" class="answer" role="region" aria-labelledby="q2">
              <div class="answer-inner">Nous réduisons drastiquement délais et coûts de recrutement tout en simplifiant le parcours candidat.</div>
            </div>
          </li>

          <li class="faq-item">
            <button id="q3" class="faq-btn" aria-expanded="false" aria-controls="a3">
              <span>Qui peut utiliser ASSIGNME ?</span><span class="chev" aria-hidden="true"></span>
            </button>
            <div id="a3" class="answer" role="region" aria-labelledby="q3">
              <div class="answer-inner">Candidats, recruteurs privés (PME, hôpitaux, cabinets RH) et acteurs publics (ex. France Travail).</div>
            </div>
          </li>

          <li class="faq-item">
            <button id="q4" class="faq-btn" aria-expanded="false" aria-controls="a4">
              <span>Comment ça fonctionne ?</span><span class="chev" aria-hidden="true"></span>
            </button>
            <div id="a4" class="answer" role="region" aria-labelledby="q4">
              <div class="answer-inner">IA de compréhension sémantique (profils &amp; offres), détection des correspondances implicites et génération automatique de candidatures.</div>
            </div>
          </li>

          <li class="faq-item">
            <button id="q5" class="faq-btn" aria-expanded="false" aria-controls="a5">
              <span>En quoi êtes-vous différents des job boards ?</span><span class="chev" aria-hidden="true"></span>
            </button>
            <div id="a5" class="answer" role="region" aria-labelledby="q5">
              <div class="answer-inner">Pas de recherche par mots-clés : le matching est contextuel et proactif, l'IA pousse les opportunités pertinentes.</div>
            </div>
          </li>

          <li class="faq-item">
            <button id="q6" class="faq-btn" aria-expanded="false" aria-controls="a6">
              <span>Où en êtes-vous aujourd'hui ?</span><span class="chev" aria-hidden="true"></span>
            </button>
            <div id="a6" class="answer" role="region" aria-labelledby="q6">
              <div class="answer-inner">MVP en cours, démonstrateur en ligne et programme pilotes sur 12&nbsp;mois.</div>
            </div>
          </li>

          <li class="faq-item">
            <button id="q7" class="faq-btn" aria-expanded="false" aria-controls="a7">
              <span>Quelle est votre ambition ?</span><span class="chev" aria-hidden="true"></span>
            </button>
            <div id="a7" class="answer" role="region" aria-labelledby="q7">
              <div class="answer-inner">Devenir le standard européen du matching emploi-compétences basé IA, privé et public.</div>
            </div>
          </li>
        </ul>

        <div class="input-wrap">
          <input id="qa-input" class="in" type="text" placeholder="Pose ta question" aria-label="Votre question">
          <button id="qa-send" class="send" type="button">Envoyer</button>
        </div>
      </div>
    </aside>
  </main>

  <script>
    (function(){
      /* FAQ accordion */
      const btns=[...document.querySelectorAll('.faq-btn')];
      function closeAll(except){
        btns.forEach(b=>{
          if(b!==except){
            b.setAttribute('aria-expanded','false');
            const id=b.getAttribute('aria-controls');
            const el=document.getElementById(id);
            if(el) el.style.maxHeight='0px';
          }
        });
      }
      function toggle(btn){
        const open=btn.getAttribute('aria-expanded')==='true';
        const id=btn.getAttribute('aria-controls');
        const el=document.getElementById(id);
        if(!el) return;
        if(open){ btn.setAttribute('aria-expanded','false'); el.style.maxHeight='0px'; }
        else{ closeAll(btn); btn.setAttribute('aria-expanded','true'); el.style.maxHeight=el.scrollHeight+'px'; }
      }
      btns.forEach(btn=>{
        btn.addEventListener('click',()=>toggle(btn));
        btn.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' '){e.preventDefault();toggle(btn);} });
      });
      let t; window.addEventListener('resize',()=>{
        clearTimeout(t); t=setTimeout(()=>{
          btns.forEach(btn=>{
            if(btn.getAttribute('aria-expanded')==='true'){
              const id=btn.getAttribute('aria-controls');
              const el=document.getElementById(id);
              if(el) el.style.maxHeight=el.scrollHeight+'px';
            }
          });
          updatePanelSpace();
        },120);
      });

      /* Q&A backend */
      const input = document.getElementById('qa-input');
      const send  = document.getElementById('qa-send');
      const box   = document.getElementById('qa-answer');
      const API_URL = '/.netlify/functions/ask';

      function showAnswer(text){
        if(!box) return;
        box.style.display='block';
        box.innerHTML = `<div style="color:#e8f4ff;line-height:1.6;">${text}</div>`;
        box.scrollIntoView({ behavior:'smooth', block:'nearest' });
      }

      async function ask(question){
        showAnswer('<div style="color:#87ceeb;font-style:italic;">Analyse de la question en cours...</div>');
        try{
          const res = await fetch(API_URL, {
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ question })
          });
          if(!res.ok){
            const errorData = await res.json().catch(() => ({}));
            if (res.status === 429) throw new Error('Limite de requêtes atteinte. Réessayez dans quelques minutes.');
            throw new Error(errorData.error || `Erreur ${res.status}`);
          }
          const data = await res.json();
          const answer = (data.answer || '').trim() || "Cette information n'est pas disponible dans le dossier ASSIGNME.";
          showAnswer(answer);
        }catch(err){
          showAnswer(`<div style="color:#ff6b6b;">Erreur : ${err.message}</div>`);
        }
      }

      function submit(){
        const q = (input.value || '').trim();
        if(!q) return;
        ask(q);
        input.value=''; input.focus();
      }
      send.addEventListener('click', submit);
      input.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); submit(); } });

      /* ==== Réserve de l'espace pour le footer sur mobile (panel flottant) ==== */
      function updatePanelSpace(){
        const panel = document.querySelector('.panel');
        if(!panel) return;
        const h = panel.offsetHeight;
        const gap = 16;
        document.documentElement.style.setProperty('--panel-h', (h + gap) + 'px');
      }
      updatePanelSpace();
      window.addEventListener('load', updatePanelSpace);
      const observer = new MutationObserver(updatePanelSpace);
      observer.observe(document.querySelector('.panel'), {subtree:true, childList:true, attributes:true});
    })();
  </script>

  <footer class="footer">
    <div class="footer-content">
      <p>&copy; 2025 ASSIGNME. Tous droits réservés. | Une innovation DeepTech française</p>
    </div>
  </footer>
</body>
</html>
